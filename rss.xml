<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Gatsby Starter Blog RSS Feed]]></title><description><![CDATA[紀錄程式學習的過程，分享給所有需要的人。]]></description><link>https://blog.yury-chang.com</link><generator>GatsbyJS</generator><lastBuildDate>Fri, 11 Feb 2022 11:11:00 GMT</lastBuildDate><item><title><![CDATA[理解 JavaScript 非同步機制的運作]]></title><description><![CDATA[Sync / Async / Event loop JS 是單線程的程式語言，所以同時間只能執行一個程式碼片段，並且按順序執行，這就稱為同步。執行程式碼的地方稱為 context stack (或稱為 call stack)，想像 JS…]]></description><link>https://blog.yury-chang.com/posts/understand-JavaScript-async/</link><guid isPermaLink="false">https://blog.yury-chang.com/posts/understand-JavaScript-async/</guid><pubDate>Fri, 04 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Sync / Async / Event loop&lt;/h2&gt;
&lt;p&gt;JS 是單線程的程式語言，所以同時間只能執行一個程式碼片段，並且按順序執行，這就稱為同步。執行程式碼的地方稱為 context stack (或稱為 call stack)，想像 JS 引擎把每一個程式碼片段轉換成 execution context 物件，執行時放入 context stack 最上方，執行完畢則移出。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/6ef50c46e1361d8368162150a8a1050d/call-stack-demo.gif&quot; alt=&quot;call-stack-demo.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;但在實際的應用場景當中，如果有個工作需要占用很多時間就會卡住整個 JS 引擎，造成阻塞，無法執行後續的程式，於是 JS 就有了非同步的概念。&lt;/p&gt;
&lt;p&gt;假設我們呼叫 setTimeout 並傳入 callback，此時 callback 並不會馬上被執行，JS 引擎會繼續執行後續的程式，這樣的情況就被稱為非同步。&lt;/p&gt;
&lt;p&gt;而等到瀏覽器計時時間到，callback 就會被排進 task queue，此時就輪到 event loop 登場了，event loop 會不斷的檢查，等到 context stack 淨空之後才從 task queue 取出 task 放入 context stack 中執行。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/b86688215a89a91e6ebfabb166284eda/settimeout-async-demo.gif&quot; alt=&quot;settimeout-async-demo.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;常見的非同步有瀏覽器事件、setTimeout、promise、AJAX…，但實際上在這之中還可以根據執行優先順序區分出兩種類別，micro task 和 task。&lt;/p&gt;
&lt;h2&gt;Microtasks vs Tasks&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;timeout&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;promise&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// console.log&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// promise&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// timeout&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果只看觸發順序，會覺得 timeout 應該先 log 出來，但實際上卻正好相反，這是因為 task 分成 microtask 和 task (或稱為 macrotask 以避免混淆) 兩種。&lt;/p&gt;
&lt;p&gt;Promise、MutationObserver 屬於 microtask，而瀏覽器事件、setTimeout、AJAX、UI Render 則屬於 task。&lt;/p&gt;
&lt;p&gt;如同 task 會在適當的時間點被放進 task queue，microtask 則會被放進 microtask queue，而 Event loop 在發現 context stack 清空後會優先檢查 microtask queue，如果存在 microtask 則把 microtask 放進 context stack，直到 microtask queue 也清空，接著才會檢查 task queue 並重複上述的流程。&lt;/p&gt;
&lt;p&gt;這就是上述的範例 promise 會先印出來的原因，執行步驟如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;執行 setTimeout&lt;/li&gt;
&lt;li&gt;setTimeout 時間為 0，所以 setTimeout cb 會立即被放入 task queue&lt;/li&gt;
&lt;li&gt;使用 Promise.resolve 建立 Promise&lt;/li&gt;
&lt;li&gt;Promise cb 被放入 microtask queue&lt;/li&gt;
&lt;li&gt;Event loop 確認 context stack 清空，檢查 microtask queue，並將 Promise cb 放入 context stack&lt;/li&gt;
&lt;li&gt;執行 Promise cb&lt;/li&gt;
&lt;li&gt;Event loop 確認 context stack 清空，確認 microtask queue 也清空，將 setTimeout cb 放入 context stack&lt;/li&gt;
&lt;li&gt;執行 setTimeout cb&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;參考資料&lt;/h2&gt;
&lt;p&gt;ECMAScript / 9.4 Jobs and Host Operations to Enqueue Jobs&lt;br&gt;
&lt;a href=&quot;https://html.spec.whatwg.org/multipage/webappapis.html#event-loops&quot;&gt;HTML.SPEC event-loops&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://pjchender.blogspot.com/2017/08/javascript-learn-event-loop-stack-queue.html&quot;&gt;[筆記] 理解 JavaScript 中的事件循環、堆疊、佇列和併發模式&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://latentflip.com/loupe/?code=JC5vbignYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gb25DbGljaygpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZXIoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1lvdSBjbGlja2VkIHRoZSBidXR0b24hJyk7ICAgIAogICAgfSwgMjAwMCk7Cn0pOwoKY29uc29sZS5sb2coIkhpISIpOwoKc2V0VGltZW91dChmdW5jdGlvbiB0aW1lb3V0KCkgewogICAgY29uc29sZS5sb2coIkNsaWNrIHRoZSBidXR0b24hIik7Cn0sIDUwMDApOwoKY29uc29sZS5sb2coIldlbGNvbWUgdG8gbG91cGUuIik7!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D&quot;&gt;loupe&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[空白? 被 &nbsp; 雷到的經驗]]></title><description><![CDATA[最近自己做了一個打字效果，用著用著沒發現什問題，直到有一次把套用了效果的中文句子換成英文，卻赫然發現文字不會換行，像火車一樣直直的衝破螢幕去了。 當下第一反應是 CSS 忘記設定文字段行了，檢查  …正常，再加上  …沒用！而且 MDN 上還寫到  deprecated…]]></description><link>https://blog.yury-chang.com/posts/trouble-with-nbsp-space/</link><guid isPermaLink="false">https://blog.yury-chang.com/posts/trouble-with-nbsp-space/</guid><pubDate>Wed, 02 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;最近自己做了一個打字效果，用著用著沒發現什問題，直到有一次把套用了效果的中文句子換成英文，卻赫然發現文字不會換行，像火車一樣直直的衝破螢幕去了。&lt;/p&gt;
&lt;p&gt;當下第一反應是 CSS 忘記設定文字段行了，檢查 &lt;code class=&quot;language-text&quot;&gt;white-space&lt;/code&gt; …正常，再加上 &lt;code class=&quot;language-text&quot;&gt;word-break: break-word;&lt;/code&gt; …沒用！而且 MDN 上還寫到 &lt;code class=&quot;language-text&quot;&gt;break-word&lt;/code&gt; deprecated 😂。&lt;/p&gt;
&lt;p&gt;當下心一橫，蠻幹也好，我就是要換行！搜尋了一下發現有 &lt;code class=&quot;language-text&quot;&gt;overflow-wrap: break-word;&lt;/code&gt;，加上後果然可以換行了！但也直接斷在了英文單字中間拉。&lt;/p&gt;
&lt;p&gt;冷靜下來重新檢查了一下 CSS 文字換行的相關屬性，推測並不是 CSS 的問題。這時元凶已經指向了我自己寫的打字效果。&lt;/p&gt;
&lt;p&gt;打字效果的作法是用 JS 取出元素內的字串並分解為字元，再一個個填回原本的元素中，營造出打字的感覺。有什麼跟換行有關的東西嗎？Dev tool 上一個地方立刻吸引了我的注意。&lt;/p&gt;
&lt;p&gt;為了避免空白被合併，句子中所有的空白都被轉換成 &lt;code class=&quot;language-text&quot;&gt;&amp;amp;nbsp;&lt;/code&gt; 了。&lt;/p&gt;
&lt;p&gt;趕緊查了一下 &lt;code class=&quot;language-text&quot;&gt;&amp;amp;nbsp;&lt;/code&gt; 的資料，&lt;strong&gt;原來 &lt;code class=&quot;language-text&quot;&gt;&amp;amp;nbsp;&lt;/code&gt; 除了可以代替空白，同時還有阻止文字換行的效果阿！nbsp 就是 non-breaking-space 的縮寫。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;難怪 GSAP text plugin 要把空白轉換做成選項，原來是有這一層原因阿。&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;參考資料：&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.w3schools.com/html/html_entities.asp&quot;&gt;HTML Entities&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://hklifenote.blogspot.com/2014/12/blog-post.html&quot;&gt;&amp;#x26;#32 與&amp;#x26;nbsp，換行空格與不換行空格&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://pymaster.tw/posts/448998-weekend-long-knowledge-no-wrap-blanks/&quot;&gt;週末長知識: 不換行空格&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/CSS/overflow-wrap&quot;&gt;overflow-wrap - CSS（层叠样式表） | MDN&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[My First VSCode Extension]]></title><description><![CDATA[本篇的主角 Git patch stage - Visual Studio Marketplace 工作中有時會使用到 git add -p 指令，然而菜鳥如我用了大半年卻感到有些不便，手打檔案路徑實在是很麻煩，尤其是在結構複雜的專案中。 當然，我們可以到 vscode…]]></description><link>https://blog.yury-chang.com/posts/my-first-vscode-extension/</link><guid isPermaLink="false">https://blog.yury-chang.com/posts/my-first-vscode-extension/</guid><pubDate>Tue, 07 Sep 2021 00:36:41 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;本篇的主角&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=peterrabityu.git-patch-stage&amp;#x26;ssr=false#overview&quot;&gt;Git patch stage - Visual Studio Marketplace&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;工作中有時會使用到 git add -p 指令，然而菜鳥如我用了大半年卻感到有些不便，手打檔案路徑實在是很麻煩，尤其是在結構複雜的專案中。&lt;/p&gt;
&lt;p&gt;當然，我們可以到 vscode 的 folder view 上複製拉，但我往往都是打完 git patch -p 才想到需要去複製檔案路徑，鍵盤、滑鼠切換起來就有種卡卡的感覺。&lt;/p&gt;
&lt;p&gt;搜尋了一下 extension marketplace 居然沒找到相關的套件，由此萌生了自己製作 extension 的念頭。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在完成這個迷你套件後不久，我就找到了內建的 Stage Selected Ranges 的功能…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;How to do&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 310px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bfee2f7c884415bbc6b00740d8b7546f/5fad2/source-demo.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.89873417721519%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIklEQVQozz2Qa27TUBCFvQxAaePEju34cf2Oc23HdpwXebSBllZIVVUQqhDsoGtgd2zoQ3Fof3yauWeOdM+Mksg5Vbvj8eknj9+eeXh65nj7wPcfvzje3JMVS/bX90zyBXm9oVrsmS8PzFdX1Isd9fJAuzqQyJY4q1GScs9ktqNef2H+8Y56fYucH2k3d+TNgWC6Zrb4TCQ3JPmWpNiSVXvy5pqiPVL+n53ZooyjBRcDC8306WsOquae0V2GhkAzBLoZdHUw8hi86qaPZvidr6+59FSLkahRxmHDpapjuyGW7eP5MZ6IMS2vwzDd82wsGBkOI9NlbPs4bnj2jAX9/pAP798x8opTwjnq0GSg2wxHDhcDs+NyaJ3r6a2ab/obqtFt1rscYoRrRPWI7spzQsPx8dKcdrljvb1md7jB9RN6qkFfG3M5HKPqNv1XtDPqyKV30UPe/eHq5S+6I1GMsCYyBLU1QXNCZNEwLRqS6YwgkYhoSphILDfC9mLGXowtYhw/wfVTdEvgiJQkKxnaEsWMGiIjJB0lmH5KWS2ZtWvkrKWsV2R5wzRv8IKUIMkJ06LTTh9OZIUXZliOIAp9dLdA0cWKr59cXn47pMWWxWpLs9xR1hvCeEqYlkSTkiyfk2QVTpCx2R0p6hWprNhsj8yqOUUuMf0axQoXTFOHthJ4cdklOxknskaEE9xg0q39ii0S/Fh2+qkPk7y7t+sFmH7FPz3wQsiGQXAyAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;source-demo.png&quot;
        title=&quot;source-demo.png&quot;
        src=&quot;/static/bfee2f7c884415bbc6b00740d8b7546f/5fad2/source-demo.png&quot;
        srcset=&quot;/static/bfee2f7c884415bbc6b00740d8b7546f/c26ae/source-demo.png 158w,
/static/bfee2f7c884415bbc6b00740d8b7546f/5fad2/source-demo.png 310w&quot;
        sizes=&quot;(max-width: 310px) 100vw, 310px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;看到 source control 檔案右邊的 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;+&lt;/code&gt;&lt;/strong&gt; 按鈕，就想做一個類似的功能，但是並不會這麼常用，所以改成放在右鍵選單裡。&lt;/p&gt;
&lt;p&gt;為了達成上述的功能必須做到三件事：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在右鍵選單上新增 git patch stage 選項&lt;/li&gt;
&lt;li&gt;點即時執行套件的程式，取得檔案的路徑&lt;/li&gt;
&lt;li&gt;使用上一步取得的檔案路徑自動執行 git add -p&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Begin&lt;/h2&gt;
&lt;p&gt;一開始使用 scaffolds 來產生一個基本的模板。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;安裝 scaffolds&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;  $ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -g yo generator-code&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;產生基本模板&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;  $ yo code&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;按下 &lt;code class=&quot;language-text&quot;&gt;F5&lt;/code&gt; 執行測試&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;接著我們來介紹一下兩個對 extension 至關重要的檔案 &lt;strong&gt;Extension Manifest&lt;/strong&gt; 和 &lt;strong&gt;Entry file。&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Extension Manifest&lt;/h3&gt;
&lt;p&gt;其實就是 package.json，但 VS Code 額外定義了一些屬於 VS Code extension 的屬性，參考 &lt;a href=&quot;https://code.visualstudio.com/api/references/extension-manifest&quot;&gt;Extension Manifest Reference&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;而幾個重要和常用的屬性有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;publisher&lt;/code&gt; : VS Code 會使用 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;publisher&gt;.&amp;lt;name&gt;&lt;/code&gt; 作為 extention 的 ID。&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;main&lt;/code&gt; : extention entry point。&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;activationEvents&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;contributes&lt;/code&gt; : 跟 extension 如何擴充 VS Code 有關，接著會詳細的介紹。&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;engines.vscode&lt;/code&gt; : extention 支援的 VS Code 最低版本&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//  package.json&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;helloworld-sample&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;displayName&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;helloworld-sample&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;HelloWorld example for VS Code&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0.0.1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;publisher&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;vscode-samples&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;repository&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://github.com/microsoft/vscode-extension-samples/helloworld-sample&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;engines&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;vscode&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^1.51.0&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;categories&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Other&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;activationEvents&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;onCommand:extension.helloWorld&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./out/extension.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;contributes&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;commands&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;command&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;extension.helloWorld&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Hello World&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;vscode:prepublish&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;npm run compile&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;compile&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;tsc -p ./&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;watch&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;tsc -watch -p ./&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;devDependencies&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;@types/node&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^8.10.25&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;@types/vscode&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^1.51.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;tslint&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^5.16.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;typescript&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^3.4.5&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;基本概念&lt;/h2&gt;
&lt;p&gt;要了解 extension 是如何運作的，有三個基本的要素：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Activation Event&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Contribution Points&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在 package.json 中宣告，允許 command 可透過 command palette 和 UI 中使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;VS Code API&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;vscode 提供讓 extension 呼叫的 API。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Entry File&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;./out/extension.js&lt;/code&gt; 是編譯後的檔案，指的其實就是 &lt;code class=&quot;language-text&quot;&gt;./src/extension.ts&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;VS Code extention 的入口檔匯出兩個 function，&lt;code class=&quot;language-text&quot;&gt;activate&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;deactivate&lt;/code&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;activate&lt;/code&gt; 會在 &lt;code class=&quot;language-text&quot;&gt;activationEvents&lt;/code&gt; 觸發後執行。&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;deactivate&lt;/code&gt; 大多數的 extension 並不需要。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;activate&lt;/code&gt; 內使用 &lt;code class=&quot;language-text&quot;&gt;vscode.commands.registerCommand&lt;/code&gt; 註冊了 extension.helloWorld command，每次使用 helloWorld，VS Code 都會去呼叫註冊的 call back，但 vscode 並不會在編輯器開啟時就執行套件的 &lt;code class=&quot;language-text&quot;&gt;activate&lt;/code&gt; function，這是為什麼會需要 &lt;code class=&quot;language-text&quot;&gt;activationEvents&lt;/code&gt; 的原因。&lt;/p&gt;
&lt;p&gt;User 可以在 command palette 或是 UI 介面上使用 &lt;code class=&quot;language-text&quot;&gt;contributes&lt;/code&gt; 中配置地的 command，但 command 實際的程式碼要等到 &lt;code class=&quot;language-text&quot;&gt;activate&lt;/code&gt; 執行時才會被註冊，所以我們才要額外透過 &lt;code class=&quot;language-text&quot;&gt;activationEvents&lt;/code&gt; 告訴 VS Code 在哪些指令觸發時要先執行相關套件的 &lt;code class=&quot;language-text&quot;&gt;activate&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// src/extension.ts&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// The module &apos;vscode&apos; contains the VS Code extensibility API&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Import the module and reference it with the alias vscode in your code below&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; vscode &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;vscode&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// this method is called when your extension is activated&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// your extension is activated the very first time the command is executed&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;activate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; vscode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ExtensionContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Use the console to output diagnostic information (console.log) and errors (console.error)&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// This line of code will only be executed once when your extension is activated&lt;/span&gt;
  &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Congratulations, your extension &quot;helloworld-sample&quot; is now active!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// The command has been defined in the package.json file&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Now provide the implementation of the command with registerCommand&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// The commandId parameter must match the command field in package.json&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; disposable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vscode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;commands&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;registerCommand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;extension.helloWorld&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// The code you place here will be executed every time your command is executed&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Display a message box to the user&lt;/span&gt;
    vscode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;showInformationMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello World!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;subscriptions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;disposable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// this method is called when your extension is deactivated&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deactivate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;實戰演練&lt;/h2&gt;
&lt;h3&gt;新增 patch stage 選項&lt;/h3&gt;
&lt;p&gt;透過配置 &lt;code class=&quot;language-text&quot;&gt;contributes&lt;/code&gt;，當版控是 git，只要使用滑鼠右鍵點擊 working tree 中有變更的檔案，就可以看到由我們新增的 &lt;code class=&quot;language-text&quot;&gt;patch stage&lt;/code&gt; 選項。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token property&quot;&gt;&quot;contributes&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;commands&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;command&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;git-patch-stage.patch stage&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;patch stage&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;menus&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;scm/resourceState/context&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;command&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;git-patch-stage.patch stage&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;group&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;patch stage&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;when&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;scmProvider == git &amp;amp;&amp;amp; scmResourceGroup == workingTree&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/a663e3e7e0587a7c119b7b35f0a00ec1/patch-stage.gif&quot; alt=&quot;patch-stage.gif&quot;&gt;&lt;/p&gt;
&lt;h3&gt;套件主程式&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; vscode &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;vscode&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;patchStage&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;resourceStates&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; vscode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SourceControlResourceState&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; resourceState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; resourceStates&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; filePath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vscode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;workspace&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;asRelativePath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;resourceState&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;resourceUri&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; newTerminal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vscode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createTerminal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    newTerminal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    newTerminal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sendText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;git add -p &quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;filePath&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;參考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://code.visualstudio.com/api/get-started/your-first-extension&quot;&gt;Your First Extension&lt;/a&gt;&lt;/p&gt;</content:encoded></item></channel></rss>